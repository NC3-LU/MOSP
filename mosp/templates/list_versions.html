{% extends "layout.html" %}
{% block content %}
<div class="container">
  <div class="row">
      <div class="col">
          <h1>Revision history</h1>
      </div>
  </div>
    <div class="row">
        <div class="col">
            <h2>{{ json_object.name }}</h2>
            <p>Object created by {{ json_object.creator.login }}<br />
            {{ json_object.versions.all() | length }} revision{% if json_object.versions.all() | length > 1 %}s{% endif %}</p>
        </div>
    </div>
    <br />
    <ul class="list-group">
      <li class="list-group-item">(current - <a href="{{ url_for('object_bp.get_diff', object_id=json_object.id, before=last_revision.id, after=json_object.id) }}">diff</a>) {{ json_object.last_updated | datetime }} <a href="{{ url_for('user_bp.get', login=json_object.editor.login) }}">{{ json_object.editor.login }}</a> - <a href="{{ url_for('object_bp.view', object_id=json_object.id) }}">consult</a></li>
      {% for version in json_object.versions | sort(attribute='last_updated', reverse = True) %}
        <li class="list-group-item">{% if versions_branch[version.id] %}(<a href="{{ url_for('object_bp.get_diff', object_id=json_object.id, before=versions_branch[version.id], after=version.id) }}">diff</a>){% endif %} {{ version.last_updated | datetime }} <a href="{{ url_for('user_bp.get', login=version.editor.login) }}">{{ version.editor.login }}</a> - <a href="{{ url_for('object_bp.view_version', object_id=json_object.id, version_id=version.id) }}">consult</a> - <a href="{{ url_for('object_bp.restore_version', object_id=json_object.id, version_id=version.id)  }}">restore</a></li>
      {% endfor %}
    </ul>
</div>
<script>
</script>
<!-- /.container -->
{% endblock %}
